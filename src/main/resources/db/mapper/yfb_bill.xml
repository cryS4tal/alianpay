<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ylli.api.yfbpay.mapper.YfbBillMapper">
    <resultMap id="billMap" type="com.ylli.api.yfbpay.model.YfbBill"/>

    <select id="getBills" resultMap="billMap">
        SELECT
        *
        FROM t_yfb_bill
        <where>
            <if test="user_id != null">
                user_id = ${user_id}
            </if>
            <if test="status != null">
                AND status = ${status}
            </if>
            <if test="mch_order_id != null">
                AND sub_no = #{mch_order_id}
            </if>
            <if test="sys_order_id != null">
                AND order_no = #{sys_order_id}
            </if>
            <if test="pay_type != null">
                AND pay_type = #{pay_type}
            </if>
            <if test="trade_time != null">
                AND DAYOFYEAR(trade_time) = DAYOFYEAR(NOW())
            </if>
            <if test="start_time != null">
                AND create_time >= #{start_time}
            </if>
            <if test="end_time != null">
                AND create_time &lt; #{end_time}
            </if>
        </where>
    </select>

</mapper>