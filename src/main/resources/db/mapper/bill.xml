<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ylli.api.pay.mapper.BillMapper">
    <resultMap id="billMap" type="com.ylli.api.pay.model.Bill"/>

    <select id="getBills" resultMap="billMap">
        SELECT
        *
        FROM t_bill
        <where>
            <if test="mch_id != null">
                mch_id = ${mch_id}
            </if>
            <if test="status != null">
                AND status = ${status}
            </if>
            <if test="mch_order_id != null">
                AND mch_order_id = #{mch_order_id}
            </if>
            <if test="sys_order_id != null">
                AND sys_order_id = #{sys_order_id}
            </if>
            <if test="pay_type != null">
                AND pay_type = #{pay_type}
            </if>
            <if test="trade_time != null">
                AND DAYOFYEAR(trade_time) = DAYOFYEAR(NOW())
            </if>
            <if test="start_time != null">
                AND create_time >= #{start_time}
            </if>
            <if test="end_time != null">
                AND create_time &lt; #{end_time}
            </if>
        </where>
        ORDER BY create_time DESC
    </select>

</mapper>